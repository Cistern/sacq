cmake_minimum_required(VERSION 2.8)

project(libab)
SET(CMAKE_C_FLAGS "-fPIC")
SET(CMAKE_CXX_FLAGS "-std=c++14 -fPIC")

include_directories(
	include
	src
	dep/libuv/include
)

add_subdirectory(dep/glog)
add_subdirectory(dep/libuv)

add_executable(main
	src/main.cc
)

add_library(ab SHARED
	src/message/message.cc
	src/peer/peer.cc
	src/node/node.cc
	src/node/role.cc
	src/c.cc
)

target_link_libraries(ab glog)
target_link_libraries(ab uv)
target_link_libraries(main ab)

install(TARGETS ab DESTINATION lib)
install(FILES src/ab.h DESTINATION include)

